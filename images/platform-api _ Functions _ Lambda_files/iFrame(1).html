<!DOCTYPE html>
<!-- saved from url=(0209)https://global.console.aws.amazon.com/lotus/csp/@amzn/aws-ccx-regions-availability/1/iFrame.html?packageName=%40amzn%2Faws-ccx-regions-availability&majorVersion=1&versionId=05c80511-dc11-41b2-9874-e7a0332c0c5f -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><script>(()=>{"use strict";var e;!function(e){e.FAILED_FETCH="FAILED_FETCH",e.INVALID_REQUEST="INVALID_REQUEST",e.FAILED_CSP="FAILED_CSP"}(e||(e={}));const t=new class{loadStatus;constructor(e){this.loadStatus=e}async handleEvent(e){!0===e.data.isPingCheck?this.handlePingStatusEvent(e):await this.handleFetchEvent(e)}handlePingStatusEvent(e){const t={status:this.loadStatus};e.ports[0]?e.ports[0].postMessage(t):console.warn(`Event does not contain a MessageChannel port, therefore unable to call postMessage with pingStatusResponse: ${this.loadStatus}`)}async handleFetchEvent(t){if(200!==this.loadStatus)return this.respondFetchToPage(t,{status:this.loadStatus,errorType:e.FAILED_CSP});let s;try{s=this.buildRequest(t.data)}catch(s){return this.respondFetchToPage(t,{error:{name:s.name,message:s.message},errorType:e.INVALID_REQUEST})}try{const e=await fetch(s),a=await this.buildResponse(e);return this.respondFetchToPage(t,a)}catch(s){return this.respondFetchToPage(t,{error:{name:s.name,message:s.message},errorType:e.FAILED_FETCH})}}buildRequest(e){const{endpoint:t,requestInit:s}=e;if(!t||!s)throw new Error("Missing endpoint or requestInit from event");return new Request(t,{...s})}async buildResponse(e){const t={};return e.headers.forEach(((e,s)=>{t[s]=e})),{responseInit:{headers:t,status:e.status,statusText:e.statusText},responseArrayBuffer:await e.arrayBuffer(),errorType:null}}respondFetchToPage(e,t){e.ports[0]?null===t.errorType?e.ports[0].postMessage(t,[t.responseArrayBuffer]):e.ports[0].postMessage(t):console.warn(`Event does not contain a MessageChannel port, therefore unable to call postMessage with errorType: ${t.errorType}`)}}(200);self.onmessage=e=>{t.handleEvent(e)}})();
//# sourceMappingURL=200-iFrame.js.map</script></body></html>